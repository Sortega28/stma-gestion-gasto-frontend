<div class="usuarios-container">

  <div class="col-izquierda">

    <h2>Datos de usuario</h2>

    <button class="ibm-btn" style="margin-bottom: 15px;" (click)="nuevoUsuario()">
      <mat-icon>add</mat-icon> Nuevo usuario
    </button>

    <form class="form-grid">

      <mat-form-field appearance="outline">
        <mat-label>Nombre*</mat-label>
        <input matInput [(ngModel)]="usuarioSeleccionado.nombre" name="nombre">
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Apellidos*</mat-label>
        <input matInput [(ngModel)]="usuarioSeleccionado.apellidos" name="apellidos">
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Email*</mat-label>
        <input matInput [(ngModel)]="usuarioSeleccionado.email" name="email">
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Contraseña*</mat-label>
        <input type="password" matInput [(ngModel)]="usuarioSeleccionado.password" name="password">
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Rol*</mat-label>
        <mat-select [(ngModel)]="usuarioSeleccionado.role" name="role">
          <mat-option *ngFor="let r of roles" [value]="r.value">
            {{ r.nombre }}
          </mat-option>
        </mat-select>
      </mat-form-field>

    </form>

    <button class="ibm-btn" (click)="guardarPerfil()">
      <mat-icon>save</mat-icon> Guardar cambios
    </button>

  </div>


  <div class="col-foto">
    <img class="foto-perfil" src="assets/Imagenes/Marta-lopez.jpg">
  </div>


  <div class="col-derecha">

    <h3>Usuarios en la plataforma</h3>

    <div class="filtros-usuarios">

      <mat-form-field appearance="outline">
        <mat-label>Buscar por nombre</mat-label>
        <input matInput [(ngModel)]="filtroNombre" name="filtroNombre">
      </mat-form-field>

      <button class="ibm-btn" (click)="buscarUsuario()">
        <mat-icon>search</mat-icon> Buscar
      </button>

    </div>

    <table mat-table [dataSource]="usuarios" class="tabla-usuarios">

      <ng-container matColumnDef="nombre">
        <th mat-header-cell *matHeaderCellDef>Nombre</th>
        <td mat-cell *matCellDef="let row">{{ row.nombre }}</td>
      </ng-container>

      <ng-container matColumnDef="apellidos">
        <th mat-header-cell *matHeaderCellDef>Apellidos</th>
        <td mat-cell *matCellDef="let row">{{ row.apellidos }}</td>
      </ng-container>

      <ng-container matColumnDef="rol">
        <th mat-header-cell *matHeaderCellDef>Rol</th>

        <td mat-cell *matCellDef="let row">{{ row.role }}</td>
      </ng-container>

      <ng-container matColumnDef="acciones">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let row">
          <a (click)="editarUsuario(row)">Editar Perfil</a> |
          <a style="color:red; cursor:pointer;" (click)="eliminarUsuario(row)">Eliminar</a>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

    </table>

    <div class="paginacion">

      <button class="btn-pag" [disabled]="page === 1" (click)="anterior()">
        ◀ Anterior
      </button>

      <span>Página {{ page }} de {{ lastPage }}</span>

      <button class="btn-pag" [disabled]="page === lastPage" (click)="siguiente()">
        Siguiente ▶
      </button>

    </div>

  </div>
</div>
